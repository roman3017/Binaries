diff --git a/board/qemu/riscv32-virt/linux.config.fragment b/board/qemu/riscv32-virt/linux.config.fragment
index bca9aa61c7..befeee5b5c 100644
--- a/board/qemu/riscv32-virt/linux.config.fragment
+++ b/board/qemu/riscv32-virt/linux.config.fragment
@@ -1,12 +1,74 @@
+# CONFIG_SYSVIPC is not set
+# CONFIG_IKCONFIG is not set
+# CONFIG_CGROUPS is not set
+# CONFIG_USER_NS is not set
+# CONFIG_CHECKPOINT_RESTORE is not set
+CONFIG_BLK_DEV_INITRD=y
+CONFIG_INITRAMFS_SOURCE=""
+CONFIG_RD_GZIP=y
+CONFIG_RD_BZIP2=y
+CONFIG_RD_LZMA=y
+CONFIG_RD_XZ=y
+CONFIG_RD_LZO=y
+CONFIG_RD_LZ4=y
+# CONFIG_EXPERT is not set
+CONFIG_SHMEM=y
+# CONFIG_BPF_SYSCALL is not set
 CONFIG_32BIT=y
 CONFIG_ARCH_RV32I=y
 # CONFIG_ARCH_RV64I is not set
+CONFIG_CMODEL_MEDLOW=y
+# CONFIG_CMODEL_MEDANY is not set
 CONFIG_MAXPHYSMEM_2GB=y
+# CONFIG_SMP is not set
+CONFIG_TUNE_GENERIC=y
+# CONFIG_RISCV_ISA_C is not set
+# CONFIG_FPU is not set
+# CONFIG_PCI is not set
+# CONFIG_MODULES is not set
 CONFIG_LBDAF=y
-# CONFIG_SCSI_NSP32 is not set
+# CONFIG_NET is not set
+CONFIG_DEVTMPFS=y
+CONFIG_DEVTMPFS_MOUNT=y
+# CONFIG_BLK_DEV_LOOP is not set
+# CONFIG_BLK_DEV_RAM is not set
+# CONFIG_SCSI is not set
+# CONFIG_ATA is not set
+CONFIG_INPUT=y
+# CONFIG_INPUT_MOUSEDEV is not set
+CONFIG_INPUT_FF_MEMLESS=y
+# CONFIG_VT_HW_CONSOLE_BINDING is not set
+# CONFIG_SERIAL_8250 is not set
+CONFIG_HW_RANDOM=y
+# CONFIG_I2C is not set
+# CONFIG_POWER_SUPPLY is not set
+# CONFIG_DRM is not set
+# CONFIG_FB is not set
+# CONFIG_BACKLIGHT_LCD_SUPPORT is not set
+# CONFIG_USB is not set
+# CONFIG_VIRTIO_MMIO is not set
+# CONFIG_SYNC_FILE is not set
+# CONFIG_RAS is not set
+# CONFIG_EXT2_FS is not set
+# CONFIG_EXT4_FS is not set
+# CONFIG_AUTOFS4_FS is not set
+# CONFIG_AUTOFS_FS is not set
+# CONFIG_MSDOS_FS is not set
+# CONFIG_VFAT_FS is not set
+# CONFIG_PROC_CHILDREN is not set
+CONFIG_TMPFS=y
+# CONFIG_NLS is not set
+# CONFIG_KEYS is not set
+# CONFIG_CRYPTO is not set
+# CONFIG_CRC16 is not set
 CONFIG_GENERIC_ATOMIC64=y
 CONFIG_GENERIC_LIB_ASHLDI3=y
 CONFIG_GENERIC_LIB_ASHRDI3=y
 CONFIG_GENERIC_LIB_LSHRDI3=y
 CONFIG_GENERIC_LIB_UCMPDI2=y
-CONFIG_GENERIC_LIB_UMODDI3=y
+# CONFIG_PRINTK_TIME is not set
+CONFIG_FRAME_WARN=1024
+# CONFIG_DEBUG_KERNEL is not set
+CONFIG_DEBUG_MEMORY_INIT=y
+# CONFIG_FTRACE is not set
+
diff --git a/configs/qemu_riscv32_virt_defconfig b/configs/qemu_riscv32_virt_defconfig
index 84f7b6ab9c..ae53632063 100644
--- a/configs/qemu_riscv32_virt_defconfig
+++ b/configs/qemu_riscv32_virt_defconfig
@@ -1,14 +1,22 @@
+# Target Options
+BR2_RISCV_ISA_RVI=y
+BR2_RISCV_ISA_RVM=y
+BR2_RISCV_ISA_RVA=y
+# BR2_riscv_g is not set
+BR2_riscv_custom=y
+BR2_RISCV_ISA_CUSTOM_RVM=y
+
 # Architecture
 BR2_riscv=y
 BR2_RISCV_32=y
 
 # System
-BR2_SYSTEM_DHCP="eth0"
+BR2_SYSTEM_DHCP=""
 BR2_TARGET_GENERIC_GETTY=y
-BR2_TARGET_GENERIC_GETTY_PORT="ttyS0"
+BR2_TARGET_GENERIC_GETTY_PORT="hvc0"
 
 # Filesystem
-BR2_TARGET_ROOTFS_EXT2=y
+BR2_TARGET_ROOTFS_CPIO=y
 
 # Linux headers same as kernel, a 4.20 series
 BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_20=y
@@ -19,7 +27,7 @@ BR2_LINUX_KERNEL_CUSTOM_VERSION=y
 BR2_LINUX_KERNEL_CUSTOM_VERSION_VALUE="4.20.17"
 BR2_LINUX_KERNEL_USE_ARCH_DEFAULT_CONFIG=y
 BR2_LINUX_KERNEL_CONFIG_FRAGMENT_FILES="board/qemu/riscv32-virt/linux.config.fragment"
-BR2_LINUX_KERNEL_IMAGE=y
+BR2_LINUX_KERNEL_VMLINUX=y
 
 # Bootloader
 BR2_TARGET_OPENSBI=y
